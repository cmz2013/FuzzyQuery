package cn.common.page;

import java.util.List;

import com.venustech.tsoc.cupid.commons.mvc.Pager;
import com.venustech.tsoc.cupid.l3_e.common.sort.CommonComparator;
import com.venustech.tsoc.cupid.l3_e.common.sort.SortUtils;

public class PagerUtils {
	/**
	 * æ’åºåˆ†é¡µï¼Œè¿”å›æ?è®°å½•æ•°å’Œä¸?¡µæ•°æ®
	 * 
	 * å¦‚æœæ’åºå­—æ®µç©ºåˆ™ä¸æ’åº?
	 * 
	 * @param pager
	 * @return
	 */
	@SuppressWarnings({ "rawtypes", "unchecked" })
	public static Pager paging(
			List<? extends CommonComparator> dataCache, Pager pager) {
		List<? extends CommonComparator> subList = null;
		if(dataCache == null || dataCache.size() == 0 ) {
			pager.setRecords(0);
			return pager;
		}
		
		if (null != pager.getSidx() && null != pager.getSord()) {
			SortUtils.sort(dataCache, pager.getSidx(), pager.getSord());
		}
		
		if(pager.getPageSize() > dataCache.size())	 {
			subList = dataCache;
		} else if(pager.getPage()*pager.getPageSize() <= dataCache.size()) { 
			subList = dataCache.subList((pager.getPage()-1)*pager.getPageSize(), pager.getPage()*pager.getPageSize());
		}else {	
			//å½“å‰è®°å½•æ•?> æ•°æ®æ€»æ•°
			subList = dataCache.subList((pager.getPage()-1)*pager.getPageSize(), dataCache.size());
		}
		pager.setData(subList);
		pager.setRecords(dataCache.size());
		return pager;
	}

}
